// attractivejs@0.11.0 downloaded from https://ga.jspm.io/npm:attractivejs@0.11.0/dist/attractive.js

var t={};(function(e,s){t=s()})(0,(function(){class Debug{static enabled=false;static prefix="ðŸ§² ";static log(...t){this.enabled&&console.log(this.prefix,...t)}static warn(...t){this.enabled&&console.warn(this.prefix,...t)}static error(...t){this.enabled&&console.error(this.prefix,...t)}static throw(t){throw new Error(`${this.prefix}${t}`)}}class Events{#t;constructor(t){Debug.log("Events with actions:",Object.keys(t));this.#t=t}process(t,{on:e,using:s}){e&&this.#e(e.dataset.action).some((r=>{const n=this.#s(r,{for:t,on:e,using:s});return n===false}))}#e(t){return t.split(" ").filter((t=>t))}#s(t,{for:e,on:s,using:r}){Debug.log("Process action for",e.type,"on",s,"â€¦");if(t.includes(":")){const[s,r]=t.split(":");if(e.type!==r)return;t=s}else if(t.includes("->")){const[s,r]=t.split("->");const n=s.includes("@")?s.split("@")[1]:s;if(n!==e.type)return;t=r}else if(e.type!==r)return;Debug.log("â€¦","processed action for",e.type,"on",s);return this.#r(t,{on:s,for:e})}#r(t,{on:e,for:s}){Debug.log("Execute action",t,"on",e,"â€¦");const r=t.split("#");const[n,i,a]=r;const o=this.#t[n]?n:i??t;if(typeof this.#t[o]!=="function")return;const c=this.#t[n]?r.slice(1).join("#"):a??null;const l=this.#t[o](e,{value:c,targetElement:e.dataset.target});l===false&&s&&s.preventDefault();Debug.log("â€¦","executed action",t,"on",e);return l}}class EventTypes{identify({by:t}){const e=t.split(" ");return e.filter((t=>t.includes("->"))).map((t=>t.split("->")[0]))}getDefault({from:t}){const e=t.tagName.toLowerCase();const s=e==="input";const r=s?t.type||"text":null;return s?this.#n.input[r]||this.#n.input.default:this.#n[e]||this.#n.default}#n={a:"click",button:"click",input:{checkbox:"change",radio:"change",submit:"click",button:"click",reset:"click",default:"input"},select:"change",textarea:"input",form:"submit",default:"click"}}var t=new EventTypes;class Observer{#i;#a;#o;constructor(t,e=null){this.#i=t;this.#a=e}start(t){if(window.MutationObserver){this.#o=new MutationObserver((e=>{const s=new Set;const r=new Set;e.forEach((e=>this.#c(e,{for:t,elements:{added:s,removed:r}})));s.forEach((t=>this.#i(t)));this.#a&&r.forEach((t=>this.#a(t)))}));this.#o.observe(document.documentElement,{childList:true,subtree:true});return this}}stop(){this.#o&&this.#o.disconnect();return this}#c(t,{for:e,elements:{added:s,removed:r}}){if(t.type==="childList"){t.addedNodes.forEach((t=>{this.#l(t,{for:e,and:s})}));t.removedNodes.forEach((t=>{this.#l(t,{for:e,and:r})}))}}#l(t,{for:e,and:s}){if(t.nodeType===Node.ELEMENT_NODE){t.matches&&t.matches(e)&&s.add(t);t.querySelectorAll&&t.querySelectorAll(e).forEach((t=>s.add(t)))}}}class Modifiers{#u={mounted:(t,e)=>{e()},now:(t,e)=>{e()},whenVisible:(t,e)=>{const s=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){e();s.disconnect()}}))}));s.observe(t)}};setup({for:t,on:e,trigger:s}){const r=this.#u[t];if(!r)return false;r(e,s);return true}}var e=new Modifiers;class ActionBase{constructor(t,e={}){if(!t)throw new Error("Current element is required");this.currentElement=t;this.targetElement=e.targetElement;this.options=e}get targets(){return this.targetElement?Array.from(document.querySelectorAll(this.targetElement)):[this.currentElement]}cycledValue(t,e){const s=Array.isArray(e)?e:e.split(",").map((t=>t.trim()));const r=s.indexOf(t);const n=(r+1)%s.length;return s[n]}}class Attribute extends ActionBase{constructor(t,e={}){super(t,e);const[s,r]=e.value.split("=");this.attribute=s;this.value=r}toggle(){this.attribute&&this.targets.forEach((t=>t.hasAttribute(this.attribute)?t.removeAttribute(this.attribute):t.setAttribute(this.attribute,this.value||"")))}cycle(){this.value&&this.targets.forEach((t=>this.#h(t)))}add(){this.attribute&&this.targets.forEach((t=>t.setAttribute(this.attribute,this.value||"")))}remove(){this.attribute&&this.targets.forEach((t=>t.removeAttribute(this.attribute)))}#h(t){const e=this.cycledValue(t.getAttribute(this.attribute),this.value);t.setAttribute(this.attribute,e)}}const s=t=>(e,s={})=>{const r=new Attribute(e,s);return r[t]()};var r={toggleAttribute:s("toggle"),cycleAttribute:s("cycle"),addAttribute:s("add"),removeAttribute:s("remove")};const n=t=>t?.split(",").map((t=>t.trim())).filter(Boolean)??[];class Class extends ActionBase{constructor(t,e={}){super(t,e);this.value=n(e.value)}toggle(){this.value&&this.targets.forEach((t=>this.#d({forEach:t})))}cycle(){this.value&&this.value.length!==0&&this.targets.forEach((t=>this.#f(t)))}add(){this.value&&this.targets.forEach((t=>t.classList.add(...this.value)))}remove(){this.value&&this.targets.forEach((t=>t.classList.remove(...this.value)))}#d({forEach:t}){this.value.forEach((e=>t.classList.toggle(e)))}#f(t){const e=this.value.find((e=>t.classList.contains(e)))||"";const s=this.cycledValue(e,this.value);t.classList.remove(...this.value);t.classList.add(s)}}const i=t=>(e,s={})=>{const r=new Class(e,s);return r[t]()};var a={toggleClass:i("toggle"),cycleClass:i("cycle"),addClass:i("add"),removeClass:i("remove")};let o;const c=(t,e)=>{clearTimeout(o);o=setTimeout(t,e)};class Clipboard extends ActionBase{constructor(t,e={}){super(t,e);this.value=e.value}async copy(){const t=this.value||(this.targets[0]?.value??this.targets[0]?.textContent);if(t!==void 0)try{await navigator.clipboard.writeText(t);this.#g(true)}catch(t){this.#g(false)}}#g(t){const e=parseInt(this.currentElement.dataset.copyDelay);this.targets.forEach((e=>e.setAttribute(this.#v,t)));e&&c((()=>this.targets.forEach((t=>t.removeAttribute(this.#v)))),e)}get#v(){return"data-copy-success"}}const l=t=>(e,s={})=>{const r=new Clipboard(e,s);return r[t]()};var u={copy:l("copy")};class Confirm extends ActionBase{confirm(){const t=this.currentElement.dataset.confirmMessage||"Are you sure?";const e=window.confirm(t);this.#g(e);return e}#g(t){this.currentElement.setAttribute("data-confirm-success",t);const e=this.currentElement.dataset.confirmDuration;e&&c((()=>this.currentElement.removeAttribute("data-confirm-success")),parseInt(e))}}const h=t=>(e,s={})=>new Confirm(e,s)[t]();var d={confirm:h("confirm")};class DataAttribute extends ActionBase{constructor(t,e={}){super(t,e);const[s,r]=e.value.split("=");this.attribute=s;this.value=r}toggle(){this.attribute&&this.targets.forEach((t=>{this.attribute in t.dataset?delete t.dataset[this.attribute]:t.dataset[this.attribute]=this.value||""}))}cycle(){this.value&&this.targets.forEach((t=>this.#m(t)))}add(){this.attribute&&this.targets.forEach((t=>{t.dataset[this.attribute]=this.value||""}))}remove(){this.attribute&&this.targets.forEach((t=>delete t.dataset[this.attribute]))}#m(t){const e=this.cycledValue(t.dataset[this.attribute],this.value);t.dataset[this.attribute]=e}}const f=t=>(e,s={})=>{const r=new DataAttribute(e,s);return r[t]()};var g={toggleDataAttribute:f("toggle"),cycleDataAttribute:f("cycle"),addDataAttribute:f("add"),removeDataAttribute:f("remove")};class Dialog extends ActionBase{open(){this.targets.forEach((t=>t instanceof HTMLDialogElement&&t.show()))}openModal(){this.targets.forEach((t=>t instanceof HTMLDialogElement&&t.showModal()))}close(){this.targets.forEach((t=>t instanceof HTMLDialogElement&&t.close()))}}const v=t=>(e,s={})=>{new Dialog(e,s)[t]()};var m={open:v("open"),openModal:v("openModal"),close:v("close")};class Element extends ActionBase{add(){const t=this.targets[0];if(!t)return;const e=this.currentElement.dataset.addSource;if(!e)return;const s=document.querySelector(e);if(!s)return;const r=this.#b(s);const n=this.currentElement.dataset.addAt||"beforeend";t.insertAdjacentElement(n,r)}remove(){const t=parseInt(this.currentElement.dataset.removeDelay);const e=()=>{this.targets.forEach((t=>t.remove()))};t?setTimeout(e,t):e()}#b(t){return t.tagName==="TEMPLATE"?t.content.cloneNode(true).firstElementChild:t.cloneNode(true)}}const b=t=>(e,s={})=>{const r=new Element(e,s);return r[t]()};var p={add:b("add"),remove:b("remove")};class Form extends ActionBase{requestSubmit(){const t=parseInt(this.currentElement.dataset.submitDelay)||0;const e=()=>this.targets.forEach((t=>t instanceof HTMLFormElement&&t.requestSubmit()));t?c(e,t):e()}reset(){this.targets.forEach((t=>t instanceof HTMLFormElement&&t.reset()))}}const E=t=>(e,s={})=>{new Form(e,s)[t]()};var w={submit:E("requestSubmit"),reset:E("reset")};class Intersection extends ActionBase{constructor(t,e={}){super(t,e);this.classNames=n(e.value);this.justOnce=e.actionName==="intersect-once"}start(){if(this.classNames.length===0)return;const t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?this.#p(t,e.target):this.#E()}))}));t.observe(this.currentElement)}#p(t,e){this.targets.forEach((t=>t.classList.add(...this.classNames)));this.justOnce&&t.unobserve(e)}#E(){this.justOnce||this.targets.forEach((t=>t.classList.remove(...this.classNames)))}}const y=t=>(e,s={})=>{const r=new Intersection(e,{...s,actionName:t});return r.start()};var A={"intersect-once":y("intersect-once"),"intersect-toggle":y("intersect-toggle")};class Reload extends ActionBase{reload(){this.targets.forEach((t=>{this.#w(t)?t.reload():window.location.reload()}))}#w(t){return t.tagName==="TURBO-FRAME"&&typeof t.reload==="function"}}const L=t=>(e,s={})=>{const r=new Reload(e,s);return r[t]()};var T={reload:L("reload"),refresh:L("reload")};class CSRF{static get(){const t=document.querySelector('meta[name="csrf-token"]')?.content;return t||null}}class Request extends ActionBase{constructor(t,e={}){super(t,e);this.value=e.value}async get(){if(this.value){this.#y({with:this.value})&&console.warn(`Cross-origin request to: ${this.value}. Missing the correct CORS headers.`);this.#g("busy");try{const t=await fetch(this.value,{method:"GET"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.text();this.targets.forEach((t=>{t.innerHTML=e}));this.#g("success");return t}catch(t){console.error("GET request failed:",t);this.#g("error");throw t}}else console.warn("No URL provided in the action value")}post(){return this.#A("POST")}patch(){return this.#A("PATCH")}put(){return this.#A("PUT")}#y({with:t}){try{const e=new URL(t,window.location.href);return e.origin!==window.location.origin}catch{console.error("Invalid URL:",t);return false}}#g(t){const e=this.currentElement.dataset.requestDuration;this.targets.forEach((e=>{if(t==="busy"){e.setAttribute("data-request-busy","true");e.removeAttribute("data-request-success")}else{e.removeAttribute("data-request-busy");e.setAttribute("data-request-success",t==="success")}}));e&&t!=="busy"&&c((()=>{this.targets.forEach((t=>t.removeAttribute("data-request-success")))}),parseInt(e))}#A(t){if(this.value){this.#g("busy");return fetch(this.value,{method:t,headers:{"Content-Type":"application/json","X-CSRF-Token":CSRF.get()},body:JSON.stringify(this.#L)}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);this.#g("success");return t})).catch((e=>{console.error(`${t} request failed:`,e);this.#g("error");throw e}))}console.warn("No URL provided in the action value")}get#L(){const t={};const e=this.targets[0];if(e instanceof HTMLFormElement){const s=new FormData(e);for(const[e,r]of s.entries())t[e]=r;return t}if(this.#T){const e=this.currentElement.name;const s=this.currentElement.value;t[e]=s}return t}get#T(){return this.currentElement instanceof HTMLInputElement||this.currentElement instanceof HTMLSelectElement||this.currentElement instanceof HTMLTextAreaElement&&this.currentElement.name}}const D=t=>(e,s={})=>{const r=new Request(e,s);return r[t]()};var x={get:D("get"),post:D("post"),patch:D("patch"),put:D("put")};class ScrollTo extends ActionBase{constructor(t,e={}){super(t,e);const s=["auto","instant","smooth"];const r=e.value;this.behavior=s.includes(r)?r:"auto"}scroll(){this.targets[0]?.scrollIntoView({behavior:this.behavior})}}const M=t=>(e,s={})=>{const r=new ScrollTo(e,s);return r[t]()};var S={scrollTo:M("scroll")};const C={attribute:r,class:a,clipboard:u,confirm:d,dataAttribute:g,dialog:m,element:p,form:w,intersection:A,reload:T,request:x,scrollTo:S};const F=(t=[])=>t.length===0?Object.values(C).reduce(((t,e)=>({...t,...e})),{}):C.reduce(((e,s)=>{if(!t[s]){console.warn(`Action â€œ${s}â€ not found`);return e}return{...e,...t[s]}}),{});var k=F([]);class Attractive{#D={};#x=new WeakMap;#M=new Map;#S;#C=new Map;#F;static get debug(){return Debug.enabled}static set debug(t){Debug.enabled=t}constructor(){this.#S=new Events(k);this.#F=new Observer((t=>this.#i(t)),(t=>this.#a(t)))}activate(t={}){const{on:e=document,debug:s=false}=t;Debug.enabled=s;Debug.log("Initializingâ€¦");this.element=e;this.#F.start("[data-action]");this.element.querySelectorAll("[data-action]").forEach((t=>this.#i(t)));Debug.log("â€¦initialized");return this}withActions(t=[]){Debug.log("Initializing with actions",t);this.#S=new Events(F(t));return this}#i(s){const r=s.dataset.action;if(!r)return;const n=r.split(" ");const i=new Set(r.includes("->")?t.identify({by:r}):[t.getDefault({from:s})]);i.forEach((t=>this.#k({for:t})));n.filter((t=>t.includes("@"))).forEach((t=>{const[e]=t.split("->");const[r,n]=e.split("@");const i=r==="window"?window:document;this.#N(n,i,s)}));const a=n.filter((t=>t.includes(":"))).map((t=>t.split(":")[1]));a.forEach((t=>{e.setup({for:t,on:s,trigger:()=>this.#S.process({type:t},{on:s,using:t})})}))}#a(t){const e=this.#x.get(t);if(e){e.forEach((e=>{const s=this.#C.get(e);if(s){s.delete(t);if(s.size===0){const[t,s]=e.split(":");const r=this.#M.get(e);const n=t==="window"?window:document;n.removeEventListener(s,r);this.#M.delete(e);this.#C.delete(e)}}}));this.#x.delete(t)}}#k({for:t}){if(!this.#D[t]){this.element.addEventListener(t,(t=>this.#q(t)));Debug.log("Added event listener for",t,"to",this.element);this.#D[t]=true}}#N(t,e,s){const r=`${e===window?"window":"document"}:${t}`;this.#x.has(s)||this.#x.set(s,new Set);this.#x.get(s).add(r);this.#C.has(r)||this.#C.set(r,new Set);this.#C.get(r).add(s);if(!this.#M.has(r)){const s=e=>{const s=this.#C.get(r);s&&s.forEach((s=>{this.#S.process(e,{on:s,using:t})}))};e.addEventListener(t,s);this.#M.set(r,s)}}#q(e){const s=e.target.closest("[data-action]");if(!s)return;const r=t.getDefault({from:s});this.#S.process(e,{on:s,using:r})}}var N=new Attractive;const q=(t=document)=>{window.Attractive&&window.Attractive._initialized||N.activate({element:t})};if(typeof document!=="undefined"){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",(()=>q())):q();document.addEventListener("turbo:load",(()=>q()))}typeof window!=="undefined"&&(window.Attractive=N);return N}));var e=t;export{e as default};

